@if (isShowAlert) {
  <mtx-alert type="info" dismissible (closed)="onAlertDismiss()">
    ðŸŽ‰ Introducing
    <a [href]="introducingItem.link" target="_blank">{{ introducingItem.name }}</a>
    - {{ introducingItem.description }}
    <a [href]="introducingItem.link" target="_blank">Learn more!</a>
  </mtx-alert>
}

<div class="row">
  <!-- Statistics -->
  @for (stat of stats; track stat) {
    <div class="col-sm-6 col-md-3">
      <mat-card [class]="['text-white', 'b-0', stat.color]">
        <mat-card-header>
          <mat-card-subtitle class="text-white">{{ stat.title }}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <h2 class="m-t-0 m-b-8">{{ stat.amount }}</h2>
          <mtx-progress
            [value]="stat.progress.value"
            height="2px"
            foreground="rgba(255,255,255,1)"
            background="rgba(0,0,0,.4)"
          />
          <small class="text-muted">Last 24 hours</small>
        </mat-card-content>
      </mat-card>
    </div>
  }

  <!-- Charts -->
  <div class="col-md-7">
    <mat-card>
      <mat-card-header>
        <mat-card-title>Sales Overview</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div id="chart1"></div>
      </mat-card-content>
    </mat-card>
  </div>
  <div class="col-md-5">
    <mat-card>
      <mat-card-header>
        <mat-card-title>Stock Distribution</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div id="chart3"></div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Daily Revenue -->
  <div class="col-md-12">
    <mat-card>
      <mat-card-header>
        <mat-card-title>Revenue (Last 7 Days)</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div id="chart2"></div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Top Selling Products -->
  <div class="col-md-6">
    <mat-card>
      <mat-card-header>
        <mat-card-title>Top Selling Products</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <table class="w-full" mat-table [dataSource]="topProducts">
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Product</th>
            <td mat-cell *matCellDef="let product">{{ product.name }}</td>
          </ng-container>
          <ng-container matColumnDef="sales">
            <th mat-header-cell *matHeaderCellDef>Sales</th>
            <td mat-cell *matCellDef="let product">{{ product.sales }}</td>
          </ng-container>
          <ng-container matColumnDef="revenue">
            <th mat-header-cell *matHeaderCellDef>Revenue</th>
            <td mat-cell *matCellDef="let product">${{ product.revenue }}</td>
          </ng-container>
          <ng-container matColumnDef="growth">
            <th mat-header-cell *matHeaderCellDef>Growth</th>
            <td mat-cell *matCellDef="let product">
              <span [class]="product.growth >= 0 ? 'text-success' : 'text-danger'">
                {{ product.growth >= 0 ? '+' : '' }}{{ product.growth }}%
              </span>
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="topProductColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: topProductColumns"></tr>
        </table>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Alerts Section -->
  <div class="col-md-6">
    <!-- Low Stock Alerts -->
    <mat-card class="m-b-16">
      <mat-card-header>
        <mat-card-title>Low Stock Alerts</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <table class="w-full" mat-table [dataSource]="stockAlerts">
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Product</th>
            <td mat-cell *matCellDef="let alert">{{ alert.name }}</td>
          </ng-container>
          <ng-container matColumnDef="currentStock">
            <th mat-header-cell *matHeaderCellDef>Current Stock</th>
            <td mat-cell *matCellDef="let alert">{{ alert.currentStock }}</td>
          </ng-container>
          <ng-container matColumnDef="minStock">
            <th mat-header-cell *matHeaderCellDef>Min Stock</th>
            <td mat-cell *matCellDef="let alert">{{ alert.minStock }}</td>
          </ng-container>
          <ng-container matColumnDef="lastOrdered">
            <th mat-header-cell *matHeaderCellDef>Last Ordered</th>
            <td mat-cell *matCellDef="let alert">{{ alert.lastOrdered }}</td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="stockAlertColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: stockAlertColumns"></tr>
        </table>
      </mat-card-content>
    </mat-card>

    <!-- Expiry Alerts -->
    <mat-card>
      <mat-card-header>
        <mat-card-title>Expiring Soon</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <table class="w-full" mat-table [dataSource]="expiryAlerts">
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Product</th>
            <td mat-cell *matCellDef="let alert">{{ alert.name }}</td>
          </ng-container>
          <ng-container matColumnDef="batchNumber">
            <th mat-header-cell *matHeaderCellDef>Batch No.</th>
            <td mat-cell *matCellDef="let alert">{{ alert.batchNumber }}</td>
          </ng-container>
          <ng-container matColumnDef="expiryDate">
            <th mat-header-cell *matHeaderCellDef>Expiry Date</th>
            <td mat-cell *matCellDef="let alert">{{ alert.expiryDate }}</td>
          </ng-container>
          <ng-container matColumnDef="quantity">
            <th mat-header-cell *matHeaderCellDef>Quantity</th>
            <td mat-cell *matCellDef="let alert">{{ alert.quantity }}</td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="expiryAlertColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: expiryAlertColumns"></tr>
        </table>
      </mat-card-content>
    </mat-card>
  </div>
</div>
